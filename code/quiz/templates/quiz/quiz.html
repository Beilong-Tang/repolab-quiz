{# {% load static %} #}

{# <link rel="stylesheet" type="text/css" href="{% static 'quiz/style.css' %}"> #}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    {% load my_tags%}
    <link rel = "stylesheet" type ="text/css" href = "{% static 'quiz/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href= "{% static 'quiz/highlight/styles/default.min.css' %}">
    <script src="{% static 'quiz/highlight/highlight.min.js' %}"></script>
    <script>hljs.highlightAll();</script>
     <link rel = "stylesheet" type ="text/css" href = "{% static 'quiz/question.css' %}">
    <script>
        function checkblank(){
            var x = document.getElementsByClassName('answer');
             for (var i =0;i<x.length;i++){
                 if (x[i].value==""){
                    alert('You have unfinished blanks');
                    return false;
                 }
             }
             return true;
        }
        function submit(){
            if (checkblank()==true){
                var x = document.getElementsByName('xxx')
                for(var i=0;i<x.length;i++){
                    x[i].style.display='none'
                }
                document.getElementById('check').style.display='inline';
                document.myform.submit();
                return true;
            }
            return false;
        }



    </script>
    <title>Test</title>
</head>
<body>    
     <div class="topmenu">
        <p>COMPSCI 201: Intro to prgramming and data structures</p>
    </div>
    {% if messages %}
            <div class="messages">
                <a name="here"></a>
              {% for message in messages %}
              <p class={{message.tags}}><a style="color:black">Message: </a>{{ message}}</p>
              {% endfor %}
            </div>
            {% endif %}
    <div class="container">
        <h2 >sec-{{section}}: {{question_title}}</h2>
        <div class="row">
          <div class="col-md-2" >
            {% comment %} This is the one that shows on the top left {% endcomment %}
            <div class="row-md-1" style=" border:1px solid rgb(58, 51, 51)">
                 <a href='{% url 'quiz:userface' user_id %}' style='color:black'> Main Menu </a><br>
                 {% if week == 1 %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.0 %}' >   Week1 </a></button><br>
                 {% else %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.0 %}' style="color:rgb(0, 0, 0)">   Week1 </a></button><br>
                 {% endif %}
                 {% comment %} <a href='{% url 'quiz:week' user_id 1 %}' >   Week1 </a></button><br> {% endcomment %}
                 {% if week == 2 %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.1 %}' >   Week2 </a></button><br>
                 {% else %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.1 %}' style="color:rgb(0, 0, 0)">   Week2 </a></button><br>
                 {% endif %}
                 {% if week == 3 %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.2  %}' >   Week3 </a></button><br>
                 {% else %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.2  %}' style="color:rgb(0, 0, 0)">   Week3 </a></button><br>
                 {% endif %}
                 {% if week == 4 %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.3  %}' >   Week4 </a></button><br>
                 {% else %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.3  %}' style="color:rgb(0, 0, 0)">   Week4 </a></button><br>
                 {% endif %}
                 {% if week == 5 %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.4  %}' >   Week5 </a></button><br>
                 {% else %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.4  %}' style="color:rgb(0, 0, 0)">   Week5 </a></button><br>
                 {% endif %}
                 {% if week == 6 %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.5  %}' >   Week6 </a></button><br>
                 {% else %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.5  %}' style="color:rgb(0, 0, 0)">   Week6 </a></button><br>
                 {% endif %}
                 {% if week == 7 %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.6  %}' >   Week7 </a></button><br>
                 {% else %}
                 <a href='{% url 'quiz:quiz_new' quiz_to.6  %}' style="color:rgb(0, 0, 0)">   Week7 </a></button><br>
                 {% endif %}
            </div>
            <div class="row-md-2" style=" border:1px solid rgb(58, 51, 51)" >
              {% for quiz in question_sets %}
                 {% if quiz.submission_times <= 0 %}
                    {%if question_title == quiz.question_title%}
                        <a href= "{% url 'quiz:quiz_new' quiz.question_id %}" style="color:red;background-color: rgb(175, 248, 246);">Problem{{quiz.question_id|last2}}X</a> <br> 
                    {%else %}
                        <a href= "{% url 'quiz:quiz_new' quiz.question_id %}"style="color:red">Problem{{quiz.question_id|last2}}X</a> <br>
                    {% endif %}
                {% else %}
                    {% if quiz.ifpassed %}
                        {%if question_id == quiz.question_id%}
                            <a href= "{% url 'quiz:quiz_new' quiz.question_id %}" style="color:green;background-color: rgb(175, 248, 246);">Problem{{quiz.question_id|last2}}√</a> <br> 
                        {%else %}
                            <a href= "{% url 'quiz:quiz_new' quiz.question_id %}"style="color:green">Problem{{quiz.question_id|last2}}√</a> <br>
                        {% endif %}
                    {%else%}
                        {%if question_id == quiz.question_id%}
                            <a href= "{% url 'quiz:quiz_new' quiz.question_id %}" style="background-color: aquamarine;">Problem{{quiz.question_id|last2}}</a> <br> 
                        {%else %}
                            <a href= "{% url 'quiz:quiz_new' quiz.question_id %}">Problem{{quiz.question_id|last2}}</a> <br>
                        {% endif %}
                    {%endif%}
                {%endif%}
              {% endfor %}
            </div>
          </div>
          <div class="col-md-10" >
            <div class='question' >

                <div class='text' style="margin-bottom: 0;">
                {{text|safe}}

                </div>
            </div>
            {% if user.is_authenticated %}
            <form action="{% url 'quiz:check' question_id %}" method="post" autocomplete='off' style="margin-top:30px;position:relative;border-top:1px dashed rgb(106, 100, 100)"  name='myform' >
                {% csrf_token %}
                    {% if overdue != True%}
                        <label for="" style="text-align: center; color:rgb(110, 119, 123);font-size: 13px;">Your answer goes here:</label>
                        <br>
                        {% if recent %}
                            {% if mult %}
                                <input type="text" class= "answer" id="answer1" name="0" placeholder="Your Answer" value ="{{recent_answer}}" required>
                            {% else%}
                                {% for i in recent_answer %}
                                <input type="text" class= "answer" id="answer1" name="{{forloop.counter0}}" placeholder="({{forloop.counter0}})" value="{{i}}"  required>
                                {% endfor%}
                            {% endif %}
                        {% else%}
                            {% for i in answers %}
                            <input type="text" class= "answer" id="answer1" name="{{forloop.counter0}}" placeholder="({{forloop.counter0}})"  required> 
                            {%empty%}
                            <input type="text" class= "answer" id="answer1" name="0" placeholder="Your Answer" required> 
                            {% endfor %}
                        {% endif %}
                        <br>
                        <label for="" style="text-align: center; color:rgb(255, 157, 0);font-size: 13px; display:none ;" id ='check'>...CHECKING...</label>
            </form>
            <a href="{% url 'quiz:quiz_new' ids.0 %}"><button type="submit" style="margin-top:10px"  id='submit'  name='xxx'>Previous Question</button></a>
            <button type="submit" style="margin-top:10px"  id='submit' onclick='submit()' name='xxx'>SUBMIT</button>
            <a href="{% url 'quiz:quiz_new' ids.1 %}"><button type="submit" style="margin-top:10px"  id='submit'  name='xxx'>Next Question</button></a>
                    {% else %}
                            <p style='color:orange'>Answer: {{answer}}</p>
                    {% endif%}
                    {% if overdue == True %}
                        <p style="color:red"> You have passed the due.</p>
                    {% else %}
                        {% if submission_times > 0%}
                            {% if ifpassed %}
                                <p style="color:green"> You have passed the quiz.</p>
                            {% else %}
                                <p style="color:black"> You have {{submission_times}} times left.</p>
                            {%endif%}
                        {% else %}
                            {% if ifpassed %}
                                <p style="color:red"> Your answer is correct but it will not be recorded.</p>
                            {%else%}
                                <p style="color:red"> You have failed the quiz</p>
                            {%endif%}
                        {% endif %}
                    {% endif %}
            {% else %}
            <div class='a'>
                <P style="text-align:center;color:orange"> <a href= "{% url 'simple_judge:signin_from_question' question_title %}" >Please Login to see the page </a></p>
            </div>
            {% endif%}
          </div>
        </div>
      </div>
</body>
</html>